// =============================================================================
// BERK Hardware Bridge - Firmata Demo
// Arduino StandardFirmata protokolÃ¼ ile donanÄ±m kontrolÃ¼
// =============================================================================

kullan std::firmata

yazdÄ±r("=== BERK Firmata Demo ===\n")

// -----------------------------------------------------------------------------
// Arduino BaÄŸlantÄ±sÄ± (SimÃ¼lasyon)
// -----------------------------------------------------------------------------

yazdÄ±r("ğŸ”Œ Arduino Firmata ProtokolÃ¼")
yazdÄ±r("-" * 40)

yazdÄ±r("""
âš ï¸  Bu demo gerÃ§ek bir Arduino gerektirir!
    Arduino'nuza StandardFirmata yÃ¼klÃ¼ olmalÄ±:
    Arduino IDE â†’ File â†’ Examples â†’ Firmata â†’ StandardFirmata
""")

// -----------------------------------------------------------------------------
// Pin ModlarÄ±
// -----------------------------------------------------------------------------

yazdÄ±r("\nğŸ“Œ Pin ModlarÄ±:")
yazdÄ±r("-" * 40)

yazdÄ±r("""
Mod           AÃ§Ä±klama
------------------------------------------
"input"       Dijital giriÅŸ
"output"      Dijital Ã§Ä±kÄ±ÅŸ
"analog"      Analog giriÅŸ (ADC)
"pwm"         PWM Ã§Ä±kÄ±ÅŸ (0-255)
"servo"       Servo motor kontrolÃ¼
"pullup"      Dahili pull-up ile giriÅŸ
""")

// -----------------------------------------------------------------------------
// Ã–rnek Kod: LED Blink
// -----------------------------------------------------------------------------

yazdÄ±r("\nğŸ’¡ LED Blink Ã–rneÄŸi:")
yazdÄ±r("-" * 40)

yazdÄ±r("""
kullan std::firmata

// Arduino'ya baÄŸlan (COM3, 57600 baud)
olsun arduino = firmata::connect("COM3")
yazdÄ±r("Arduino baÄŸlandÄ±!")

// Versiyon bilgisi
olsun versiyon = firmata::get_version(arduino)
yazdÄ±r("Firmata versiyon: {}", versiyon)

// Pin 13'Ã¼ Ã§Ä±kÄ±ÅŸ yap (dahili LED)
firmata::pin_mode(arduino, 13, "output")

// LED'i 5 kez yakÄ±p sÃ¶ndÃ¼r
dÃ¶ngÃ¼ i iÃ§in 0..5 yap
    firmata::digital_write(arduino, 13, 1)
    yazdÄ±r("LED AÃ‡IK")
    bekle(500)
    
    firmata::digital_write(arduino, 13, 0)
    yazdÄ±r("LED KAPALI")
    bekle(500)
son

firmata::disconnect(arduino)
""")

// -----------------------------------------------------------------------------
// Analog Okuma
// -----------------------------------------------------------------------------

yazdÄ±r("\nğŸ“Š Analog SensÃ¶r Okuma:")
yazdÄ±r("-" * 40)

yazdÄ±r("""
// A0 pinini analog giriÅŸ yap
firmata::pin_mode(arduino, 0, "analog")

// DeÄŸer oku (0-1023)
olsun deger = firmata::analog_read(arduino, 0)
yazdÄ±r("Analog deÄŸer: {}", deger)

// Voltaja Ã§evir (5V referans)
olsun voltaj = deger * 5.0 / 1023.0
yazdÄ±r("Voltaj: {:.2f}V", voltaj)
""")

// -----------------------------------------------------------------------------
// PWM KontrolÃ¼
// -----------------------------------------------------------------------------

yazdÄ±r("\nğŸŒˆ PWM (LED ParlaklÄ±k) KontrolÃ¼:")
yazdÄ±r("-" * 40)

yazdÄ±r("""
// Pin 9'u PWM moduna al
firmata::pin_mode(arduino, 9, "pwm")

// ParlaklÄ±ÄŸÄ± kademeli artÄ±r
dÃ¶ngÃ¼ parlaklik iÃ§in 0..256 adÄ±m 16 yap
    firmata::analog_write(arduino, 9, parlaklik)
    yazdÄ±r("ParlaklÄ±k: {}/255", parlaklik)
    bekle(100)
son
""")

// -----------------------------------------------------------------------------
// Servo Motor
// -----------------------------------------------------------------------------

yazdÄ±r("\nğŸ¦¾ Servo Motor KontrolÃ¼:")
yazdÄ±r("-" * 40)

yazdÄ±r("""
// Pin 10'u servo olarak yapÄ±landÄ±r
firmata::servo_config(arduino, 10, 544, 2400)

// AÃ§Ä±larÄ± tara
dÃ¶ngÃ¼ aci iÃ§in [0, 45, 90, 135, 180] yap
    firmata::servo_write(arduino, 10, aci)
    yazdÄ±r("Servo aÃ§Ä±sÄ±: {}Â°", aci)
    bekle(500)
son
""")

// -----------------------------------------------------------------------------
// I2C HaberleÅŸme
// -----------------------------------------------------------------------------

yazdÄ±r("\nğŸ”— I2C Cihaz Ä°letiÅŸimi:")
yazdÄ±r("-" * 40)

yazdÄ±r("""
// I2C'yi etkinleÅŸtir
firmata::i2c_config(arduino)

// MPU6050 ivmeÃ¶lÃ§er Ã¶rneÄŸi (adres: 0x68)
// Wake-up komutu gÃ¶nder
firmata::i2c_write(arduino, 0x68, [0x6B, 0x00])

// 6 byte oku (ivme verileri)
olsun veri = firmata::i2c_read(arduino, 0x68, 6)
yazdÄ±r("I2C verisi: {:?}", veri)
""")

yazdÄ±r("\nâœ… Firmata demo tamamlandÄ±!")
