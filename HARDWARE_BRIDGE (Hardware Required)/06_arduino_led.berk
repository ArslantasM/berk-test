// =============================================================================
// BERK Hardware Bridge - Arduino LED KontrolÃ¼
// Tam Ã§alÄ±ÅŸan Ã¶rnek (gerÃ§ek donanÄ±m gerektirir)
// =============================================================================

kullan std::firmata
kullan std::time

yazdÄ±r("=== Arduino LED KontrolÃ¼ ===\n")

// -----------------------------------------------------------------------------
// YapÄ±landÄ±rma
// -----------------------------------------------------------------------------

sabit PORT = "COM3"        // Arduino port (deÄŸiÅŸtirin!)
sabit LED_PIN = 13         // Dahili LED
sabit BLINK_COUNT = 10     // YanÄ±p sÃ¶nme sayÄ±sÄ±
sabit BLINK_DELAY = 250    // Milisaniye

// -----------------------------------------------------------------------------
// Ana Program
// -----------------------------------------------------------------------------

yazdÄ±r("ğŸ”Œ Arduino'ya baÄŸlanÄ±lÄ±yor...")
yazdÄ±r("   Port: {}", PORT)

dene yap
    // Arduino'ya baÄŸlan
    olsun arduino = firmata::connect(PORT)
    yazdÄ±r("âœ“ BaÄŸlantÄ± baÅŸarÄ±lÄ±!")
    
    // Versiyon bilgisi
    olsun versiyon = firmata::get_version(arduino)
    yazdÄ±r("   Firmata: v{}", versiyon)
    
    // 2 saniye bekle (Arduino reset)
    yazdÄ±r("   Arduino hazÄ±rlanÄ±yor...")
    bekle(2000)
    
    // LED pinini Ã§Ä±kÄ±ÅŸ yap
    yazdÄ±r("\nğŸ’¡ LED pini yapÄ±landÄ±rÄ±lÄ±yor (pin {})...", LED_PIN)
    firmata::pin_mode(arduino, LED_PIN, "output")
    yazdÄ±r("âœ“ Pin {} Ã§Ä±kÄ±ÅŸ olarak ayarlandÄ±", LED_PIN)
    
    // LED'i yakÄ±p sÃ¶ndÃ¼r
    yazdÄ±r("\nğŸ”„ LED {} kez yanÄ±p sÃ¶necek:\n", BLINK_COUNT)
    
    dÃ¶ngÃ¼ i iÃ§in 1..BLINK_COUNT+1 yap
        // LED aÃ§
        firmata::digital_write(arduino, LED_PIN, 1)
        olsun zaman = time::now_formatted("%H:%M:%S")
        yazdÄ±r("   [{}] LED AÃ‡IK  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ", zaman)
        bekle(BLINK_DELAY)
        
        // LED kapat
        firmata::digital_write(arduino, LED_PIN, 0)
        olsun zaman = time::now_formatted("%H:%M:%S")
        yazdÄ±r("   [{}] LED KAPALI â–‘â–‘â–‘â–‘â–‘", zaman)
        bekle(BLINK_DELAY)
    son
    
    // Temizlik
    yazdÄ±r("\nğŸ”Œ BaÄŸlantÄ± kapatÄ±lÄ±yor...")
    firmata::disconnect(arduino)
    yazdÄ±r("âœ“ BaÄŸlantÄ± kapatÄ±ldÄ±.")
    
    yazdÄ±r("\nâœ… Demo baÅŸarÄ±yla tamamlandÄ±!")
    
yakala hata yap
    yazdÄ±r("\nâŒ HATA: {}", hata)
    yazdÄ±r("")
    yazdÄ±r("OlasÄ± sebepler:")
    yazdÄ±r("  1. Arduino baÄŸlÄ± deÄŸil")
    yazdÄ±r("  2. YanlÄ±ÅŸ port ({} doÄŸru mu?)", PORT)
    yazdÄ±r("  3. StandardFirmata yÃ¼klÃ¼ deÄŸil")
    yazdÄ±r("  4. Port baÅŸka program tarafÄ±ndan kullanÄ±lÄ±yor")
    yazdÄ±r("")
    yazdÄ±r("Ã‡Ã¶zÃ¼m Ã¶nerileri:")
    yazdÄ±r("  - Arduino IDE'de doÄŸru portu kontrol edin")
    yazdÄ±r("  - StandardFirmata yÃ¼kleyin:")
    yazdÄ±r("    File â†’ Examples â†’ Firmata â†’ StandardFirmata")
    yazdÄ±r("  - Serial Monitor'Ã¼ kapatÄ±n")
son
